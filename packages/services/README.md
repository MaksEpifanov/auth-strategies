# @packages/services

–ü–∞–∫–µ—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ TODO-–∑–∞–¥–∞—á–∞–º–∏ –≤ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TODO-–∑–∞–¥–∞—á–∞–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
- üóÑÔ∏è **SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- üõ°Ô∏è **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å TypeScript –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ TypeBox
- üîÑ **Singleton —Å–µ—Ä–≤–∏—Å—ã** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
bun install
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–º–ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤

```typescript
import { usersService, todosService } from '@packages/services';
import type { User, Todo, CreateUserPayload } from '@packages/services';
```

### –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const newUser = await usersService.create({
  login: 'john_doe',
  name: 'John Doe',
  password: 'securepassword123',
  role: 'user'
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –ª–æ–≥–∏–Ω—É
const user = await usersService.getByLogin('john_doe');

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
const userById = await usersService.getById(1);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const users = await usersService.getUsers();

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª–∏
const admins = await usersService.getUsers('admin');

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const updatedUser = await usersService.update(userId, {
  login: 'new_login',
  name: 'New Name',
  password: 'newpassword',
  role: 'admin'
});

// –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await usersService.delete(userId);
```

### –†–∞–±–æ—Ç–∞ —Å TODO-–∑–∞–¥–∞—á–∞–º–∏

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
const newTodo = await todosService.create(userId, {
  title: '–ò–∑—É—á–∏—Ç—å TypeScript',
  description: '–ü—Ä–æ–π—Ç–∏ –∫—É—Ä—Å –ø–æ TypeScript',
  completed: 0
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const userTodos = await todosService.getTodos(userId);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏
const todo = await todosService.getById(userId, todoId);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
const updatedTodo = await todosService.update(userId, todoId, {
  title: '–ò–∑—É—á–∏—Ç—å TypeScript (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)',
  description: '–ü—Ä–æ–π—Ç–∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∫—É—Ä—Å –ø–æ TypeScript',
  completed: 1
});

// –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
await todosService.delete(userId, todoId);
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (User)

```typescript
interface User {
  id: number;
  login: string;    // 4-40 —Å–∏–º–≤–æ–ª–æ–≤
  name: string;     // 4-100 —Å–∏–º–≤–æ–ª–æ–≤
  password: string; // —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
  role: 'user' | 'admin';
}
```

### TODO-–∑–∞–¥–∞—á–∞ (Todo)

```typescript
interface Todo {
  id: number;
  userId: number;
  title: string;       // 4-100 —Å–∏–º–≤–æ–ª–æ–≤
  description: string; // 4-1000 —Å–∏–º–≤–æ–ª–æ–≤
  completed: 0 | 1;    // 0 = –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, 1 = –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
}
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è

–ü–∞–∫–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TypeBox –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–õ–æ–≥–∏–Ω**: 4-40 —Å–∏–º–≤–æ–ª–æ–≤
- **–ò–º—è**: 4-100 —Å–∏–º–≤–æ–ª–æ–≤
- **–ü–∞—Ä–æ–ª—å**: 8-100 —Å–∏–º–≤–æ–ª–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è)
- **–†–æ–ª—å**: 'user' –∏–ª–∏ 'admin'

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –∑–∞–¥–∞—á
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: 4-100 —Å–∏–º–≤–æ–ª–æ–≤
- **–û–ø–∏—Å–∞–Ω–∏–µ**: 4-1000 —Å–∏–º–≤–æ–ª–æ–≤
- **–°—Ç–∞—Ç—É—Å**: 0 (–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞) –∏–ª–∏ 1 (–≤—ã–ø–æ–ª–Ω–µ–Ω–∞)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `Bun.password.hash()`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ TypeBox
- –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞
- –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∑–∞–¥–∞—á–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ userId)

## –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **user1** / –ø–∞—Ä–æ–ª—å: `user1` (—Ä–æ–ª—å: user)
- **user2** / –ø–∞—Ä–æ–ª—å: `user2` (—Ä–æ–ª—å: user)
- **admin** / –ø–∞—Ä–æ–ª—å: `admin` (—Ä–æ–ª—å: admin)

### TODO-–∑–∞–¥–∞—á–∏
- –ù–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–¥–∞—á –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π user1 –∏ user2

## API —Å–µ—Ä–≤–∏—Å–æ–≤

### UsersService

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç |
|-------|----------|-----------|------------|
| `create()` | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `CreateUserPayload` | `User \| null` |
| `getUsers()` | –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | `role?: Role` | `User[]` |
| `getById()` | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID | `id: UserId` | `User \| null` |
| `getByLogin()` | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –ª–æ–≥–∏–Ω—É | `login: string` | `User \| null` |
| `update()` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `id: UserId, payload: CreateUserPayload` | `User \| null` |
| `delete()` | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `id: string` | `void` |

### TodosService

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç |
|-------|----------|-----------|------------|
| `create()` | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ | `userId: UserId, payload: CreateTodoPayload` | `Todo \| null` |
| `getTodos()` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `userId: UserId` | `Todo[]` |
| `getById()` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ ID | `userId: UserId, id: TodoId` | `Todo \| null` |
| `update()` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ | `userId: UserId, id: TodoId, payload: CreateTodoPayload` | `Todo \| null` |
| `delete()` | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ | `userId: UserId, id: TodoId` | `Todo \| null` |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞
```
src/
‚îú‚îÄ‚îÄ todos/
‚îÇ   ‚îú‚îÄ‚îÄ _database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ init.ts          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ todos.ts         # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ todos.model.ts       # –ú–æ–¥–µ–ª–∏ –∏ —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ todos.service.ts     # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏
‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îú‚îÄ‚îÄ _database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ init.ts          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.example.ts  # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ users.model.ts       # –ú–æ–¥–µ–ª–∏ –∏ —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ users.service.ts     # –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã
- **Singleton Pattern**: –°–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ç—Ç–µ—Ä–Ω Singleton –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ —Å –º–æ–¥–µ–ª—è–º–∏, –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏–∫–æ–π
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º —Ç–∏–ø–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–∞—Ö
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ TypeBox DTO

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
bun run index.ts

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript
bun run start

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤
tsc
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ
- `elysia` - –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `typescript` - –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

### –°–∏—Å—Ç–µ–º–Ω—ã–µ
- `bun:sqlite` - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQLite (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å Bun)
- `bun:password` - –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å Bun)

### Workspace
- `@packages/tsconfig` - –æ–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TypeScript –¥–ª—è –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

## –≠–∫—Å–ø–æ—Ä—Ç—ã

### –°–µ—Ä–≤–∏—Å—ã
```typescript
export const usersService: UsersService;
export const todosService: TodosService;
```

### –¢–∏–ø—ã
```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
export type { User, CreateUserPayload, Role };

// –ó–∞–¥–∞—á–∏
export type { Todo, CreateTodoPayload, TodoId };
```

### DTO –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
export { UserDTO, CreateUserDTO, RoleDTO };

// –ó–∞–¥–∞—á–∏
export { TodoDTO, CreateTodoDTO };
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
